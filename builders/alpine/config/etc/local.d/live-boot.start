#!/bin/sh
# Live boot setup

echo "ðŸš€ Setting up Alpine Live CLI environment..."

# Mount tmpfs for writable home
if ! mountpoint -q /home; then
    mount -t tmpfs -o size=512M tmpfs /home
fi

# Create live user home
mkdir -p /home/liveuser
chown liveuser:liveuser /home/liveuser

# Create welcome script
cat > /home/liveuser/.bashrc << 'EOF'
# Alpine Live CLI Environment
export PS1='\[\033[01;32m\]liveuser@alpine-live\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '

echo "ðŸ§ Welcome to Alpine Linux Live CLI!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Available tools:"
echo "  â€¢ Development: git, python3, nodejs, docker"  
echo "  â€¢ Editors: nano, vim, micro"
echo "  â€¢ Monitoring: htop, btop, iotop"
echo "  â€¢ Network: wget, curl, ssh"
echo "  â€¢ File management: mc, tree"
echo ""
echo "Users:"
echo "  â€¢ root (password: alpine)"
echo "  â€¢ liveuser (password: live, sudo access)"
echo ""
echo "Services:"
echo "  â€¢ SSH server running on port 22"
echo "  â€¢ Docker daemon available"
echo ""
echo "Type 'neofetch' to see system info"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
EOF

chown liveuser:liveuser /home/liveuser/.bashrc

# Start Docker daemon
if ! pgrep dockerd > /dev/null; then
    dockerd &
fi

# Display system info
echo "âœ… Live environment setup complete!"
